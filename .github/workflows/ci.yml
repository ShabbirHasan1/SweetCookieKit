name: CI

on:
  push:
    branches: [main]
  pull_request:

permissions:
  contents: read

jobs:
  test:
    name: Build + Test (macOS)
    runs-on: macos-latest
    steps:
      - uses: actions/checkout@v4
      - uses: swift-actions/setup-swift@v2.4.0
        with:
          swift-version: "6.2"
      - name: Swift version
        run: swift --version
      - name: Build
        run: swift build -v
      - name: Test
        run: swift test -v
      - name: DocC
        run: swift package --allow-writing-to-directory /tmp/SweetCookieKit-docc generate-documentation --target SweetCookieKit --disable-indexing --transform-for-static-hosting --output-path /tmp/SweetCookieKit-docc
